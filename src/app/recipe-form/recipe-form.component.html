<div class="text-center">
<form #itemForm="ngForm" (ngSubmit)="onSubmit(itemForm)">
  <h2 mat-dialog-title>{{ getTitle() }}</h2>
  <p><strong>Sum:</strong> {{ sumCalories }} kcal, protein: {{ sumProtein }} g, fat: {{ sumFat }} g,
    carbs: {{ sumCarbohydrates }} g</p>
  <button mat-raised-button color="primary" type="submit" [disabled]="!itemForm.valid || itemsUsed.length < 1">{{ getButtonText() }}</button>
  <br />
  <br />
  <mat-form-field appearance="fill" style="width:100%">
    <mat-label>Name</mat-label>
    <input matInput [(ngModel)]="recipe.name" name="name" required/>
  </mat-form-field>
  <br/>

  <mat-form-field appearance="fill" style="width:100%">
    <mat-label>Servings</mat-label>
    <input matInput type="number" [(ngModel)]="recipe.servings" name="servings" required/>
  </mat-form-field>
  <br/>

  <mat-form-field appearance="fill" style="width:100%">
    <mat-label>Link</mat-label>
    <input matInput [(ngModel)]="recipe.link" name="link"/>
  </mat-form-field>
  <br/>

  <mat-form-field appearance="fill" style="width:100%">
    <mat-label>Description</mat-label>
    <textarea matInput [(ngModel)]="recipe.description" name="description"></textarea>
  </mat-form-field>
  <br/>

  <div style="margin: 16px 0;">
    <mat-label style="display: block; margin-bottom: 8px; font-weight: 500;">Recipe Image (optional)</mat-label>
    <input type="file" accept="image/*" (change)="onImageSelected($event)" #imageInput style="margin-bottom: 8px;">
    <div *ngIf="selectedImage" style="color: #666; font-size: 14px;">
      Selected: {{ selectedImage.name }} ({{ formatFileSize(selectedImage.size) }})
    </div>
  </div>

  <div style="margin: 16px 0;">
    <mat-label style="display: block; margin-bottom: 8px; font-weight: 500;">Recipe PDF (optional)</mat-label>
    <input type="file" accept=".pdf" (change)="onPdfSelected($event)" #pdfInput style="margin-bottom: 8px;">
    <div *ngIf="selectedPdf" style="color: #666; font-size: 14px;">
      Selected: {{ selectedPdf.name }} ({{ formatFileSize(selectedPdf.size) }})
    </div>
  </div>
</form>
  <button mat-flat-button (click)="openDialog()">
    <mat-icon>add</mat-icon>
    Add item
  </button>
  <br/>
  <br/>
</div>
<app-items-table [items]="itemsUsed" [allowDeletion]="true" (itemToDeleteEmitter)="catchItemToDelete($event)"></app-items-table>